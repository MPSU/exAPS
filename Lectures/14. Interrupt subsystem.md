# Лекция 14. Подсистема прерывания

### Содержание
* [Определение](#Определение)
* [Передача управления при прерывании](#Передача-управления-при-прерывании)
* [Классификация событий прерывания](#Классификация-событий-прерывания)
* [Основные характеристики прерываний](#Основные-характеристики-прерываний)


### Определение

**Прерывание** - событие, на которое реагирует процессор. 

_Пример_: Перемещение курсора по экрану. Если бы не было прерываний, то процессор был бы вынужден постоянно обращаться к курсору с целью узнать: изменилось ли его положение или нет. А это очень ресурсоёмко. 

### Передача управления при прерывании ###
Допустим, во время выполнения программы произошло событие прерывания. Процессор останавливает её выполнение на i-инструкции и начинает выполнять программу обработки прерывания. Завершив её, процессор возобновляет основную программу с i+1-инструкции, причём прерывание на результат выполнения не влияет.

<div align="center">
    
![](https://sun9-2.userapi.com/impg/GQiv1r_Ut17w1xVBPWhzMxbwfUWhILqp-tyTKw/zpj5WO0oYlI.jpg?size=453x241&quality=95&sign=7529a0a0e12f45f6b6a7c92fe34d5cac&type=album)

*Рис. 1. Схема передачи управления при прерывании.*
</div>


### Классификация событий прерывания ###
* **Прерывание** - события, которые происходят внутри аппаратуры. Это событие происходит _ассинхронно_ с фронтом тактового импульса. Например: изменение положения курсора.
    - Маскируемые - прерывания, которые процессор может игнорировать. _Например_: нажатие клавиши на клавиатуре.
    - Немаскируемые - прерывания, которые процессор не может игнорировать. _Например_: сигнал от датчика температуры о перегреве процессора.  
* **Исключения** - события, которые происходят внутри программы. Это событие происходит _синхронно_ с фронтом тактового импульса.
    - Ошибки. _Например_: обращение в несуществующую область памяти.
    - Ловушки. _Например_: деление на 0.
    - Отказы. _Например_: ситуации, которые никак нельзя устранить. Зачастую приводят к выключению/перезапуску процессора.

### Основные характеристики прерываний ###
* **Время реакции прерывания**, T<sub>реакции</sub>

  Это время, между запросом на прерывание и переходом к прерывающей программе (см. рис. 2) 

* **Затраты времени на переключение программ**, T<sub>загрузки</sub> и T<sub>востановления</sub>

  Это время, которое требуется программе выполнить сервисные инструкции (см. рис. 2). Например: узнать причину прерывания, сохранить данные на стек прерывания и др.

* **Эффективность прерывания**

  Это время эффективной работы программы. Т.е. отношение "полезных" (не сервисных) инструкций программы прерывания ко всем интсрукциям прерывания.

<div align="center">
    
![](https://sun9-32.userapi.com/impg/vMcgz-Eh73spCuy-Vx1jUEMw4uCaby6-1a54FA/_xp9ZL30BmY.jpg?size=580x202&quality=95&sign=dae8f9375c7909fa13786ccd3bc31af4&type=album)

*Рис. 2. Характеристики прерывания.*
</div>

* **Глубина прерывания**

    Это кол-во прерываний, которые могут произойти во время обработки прерывания (см. рис. 3). Например: если процессор, находясь внутри прерывания, не способен прерваться на другое, то говорят что глубина прерывания n=1. Также программы могут неограниченно прерывать друг друга, в таком случаем есть ограничение по памяти.


<div align="center">
    
![](https://sun9-77.userapi.com/impg/-GTsKOxTOTFas97itwiPCkMfpiFxy_YXJS3wTw/MMf09w31ad0.jpg?size=545x275&quality=95&sign=bacd790f453e2db6c9176270047f76c6&type=album)

*Рис. 3. Глубина прерываний.*
</div>






