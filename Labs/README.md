# Цикл лабораторных работ ПИН

[[СОДЕРЖАНИЕ]](../README.md)

Ссылки на подробные методические материалы по каждой работе (*в производстве*):
1. [Adder](./1.%20Verilog.%20Adder/README.md) (Verilog. Adder)
2. [ALU](./2.%20Arithmetic-logic%20unit/README.md) (Arithmetic Logic Unit)
3. [RF](./3.%20Register%20file%20and%20memory/README.md) (Register File & Memory)
4. [PPD](./4.%20Primitive%20programmable%20device/README.md) (Primitive Programmable Device)
5. [MD](./5.%20Main%20decoder/README.md) (Main Decoder)
6. [DP](./6.%20Datapath/README.md) (Datapath)
7. [PU](./7.%20Peripheral%20units/README.md) (Peripheral Units)
8. [Programming](./8.%20Programming/README.md)

Полезное:

- [Как установить Vivado](../Other/Vivado%20Basics/Install%20Vivado.md)
- [Создание базового проекта с прошивкой ПЛИС в Vivado](../Other/Vivado%20Basics/Vivado-trainer.md)
- [Что такое язык описания аппаратуры HDL](../Other/What%20is%20HDL.md)
- [Конструкции языка Verilog](../Other/Verilog%20syntax.md)
- [Тестовое окружение](../Other/Testbench.md)
- [Как добавить файл с содержимым памяти в проект](../Other/Vivado%20Basics/How%20to%20add%20a%20mem-file.md)

# Обзор лабораторных работ

![](../../technical/Labs/Pic/labs.png)

Курс *Архитектур процессорных систем* включает в себя цикл из 8 лабораторных работ, в течение которых используя язык описания аппаратуры **Verilog HDL** на основе **FPGA** (ПЛИС, программируемая логическая интегральная схема), с нуля, последовательно, создается система, под управлением процессора с архитектурой **RISC-V**, управляющего периферийными устройствами и программируемого на языке высокого уровня **C**.

Создаваемая система на ПЛИС состоит из: процессора, памяти программ и данных и контроллеров периферийных устройств.

![](../../technical/Labs/Pic/bl7_done.png)

Выполнение лабораторных работ это последовательный процесс в результате которого будет освоен ряд различных инструментов и средств. В общих словах это:

**Verilog HDL** - язык описания аппаратуры, благодаря которому схемы не рисуются, а описываются с помощью текста (кода).

**Testbench** - тестовые окружения, которые представляют собой несинтезируемые (то есть не существующие в реальном физическом мире) блоки, созданные на языке Verilog HDL для автоматического тестирования разрабатываемых устройств и проверки их корректной работоспособности.

**FPGA** - программируемая логическая интегральная схема (ПЛИС), изменяя внутреннюю конфигурацию которой можно создать любые цифровые устройства (в рамках предоставляемых ресурсов).

**Vivado** - система автоматизированного проектирования, которая превращает Verilog-код в конфигурацию и прошивает ей ПЛИС на отладочной плате. 

**Архитектура RISC-V** - открытая и свободная система команд и процессорная архитектура на основе концепции RISC для микропроцессоров и микроконтроллеров.

**Язык ассемблера RISC-V** - список основных команд и особенности их использования и написания программ.

**Ассемблер RISC-V** - программа, которая превращает код, написанный на языке ассемблера RISC-V в машинные инструкции для процессора с архитектурой RISC-V.

Далее приводится краткое описание и цель каждой отдельной лабораторной работы.

## 1. Сумматор. Verilog HDL (Adder)
![](../../technical/Labs/Pic/bl1.png)
На первой лабораторной работе изучаются базовые конструкции языка описания аппаратуры Verilog HDL, с помощью которого разрабатывается цифровой сумматор из примитивных логических вентилей, который, в последствии, конфигурируется в ПЛИС и его работа проверяется на отладочном стенде.

## 2. Арифметико-логическое устройство (ALU)
![](../../technical/Labs/Pic/bl2.png)
На второй лабораторной изучаются новые конструкции языка Verilog HDL, на основе которых разрабатывается блок арифметико-логического устройства (АЛУ). АЛУ - это устройство, на входы которого подаются операнды, над которыми нужно выполнить некоторую операцию (сложение, вычитание и тому подобное) и код операции, которую нужно выполнить, а на выходе появляется результат этой операции. Проще говоря АЛУ - это "калькулятор" процессора.

Для проверки правильной работоспособности АЛУ в конце лабораторной работы, на языке Verilog HDL, пишется testbench (тестовое окружение), которое автоматически проверяет корректность его реализации.

## 3. Регистровый файл и память (RF)
![](../../technical/Labs/Pic/bl3.png)
На третьей лабораторной разрабатываются элементы памяти для будущего процессора: память команд, память данных и регистровый файл. В памяти команд будет храниться программа, которую будет выполнять процессор. В памяти данных хранятся данные, которые будут обрабатываться процессором. Регистровый файл - это маленькая память, тоже с данными, которые могут быть поданы непосредственно на АЛУ. Особенность RISC-архитектур в том, что данные перед обработкой необходимо перенести из памяти данных в регистровый файл, только после этого к ним можно применять различные операции.

## 4. Простейшее программируемое устройство (PPD)
![](../../technical/Labs/Pic/bl4.png)
Эта работа – небольшое отступление от реализации процессора с архитектурой RISC-V и нужна для более глубокого понимания принципов работы и организации программируемых устройств. В рамках четвертой лабораторной работы из реализованных блоков собирается примитивное программируемое устройство, для которого пишется программа в машинных кодах.

## 5. Основной дешифратор команд (MD)
![](../../technical/Labs/Pic/bl5.png)
Пятая лабораторная посвящена разработке устройства управления – основному дешифратору команд. Функция основного дешифратора - получать на вход коды выполняемых операций и преобразовывать их в управляющие сигналы для всех блоков процессора (АЛУ, память, регистровый файл, мультиплексоры). Работа требует внимательности в реализации, а ее результат проверяется заранее подготовленными автоматическими тестами.

## 6. Тракт данных (DP)
![](../../technical/Labs/Pic/bl6.png)
Разработанные блоки объединяются, образуя тракт данных, управляемый основным дешифратором команд. Результатом шестой лабораторной работы является однотактный процессор, с архитектурой RISC-V, поддерживающий стандартный набор целочисленных инструкций RV32I. В качестве проверки на процессоре запускаются программы, заранее написанные на языке ассемблера RISC-V. Сравнивается результат полученный на симуляторе и на разработанном процессоре.

## 7. Периферийные устройства (PU)
![](../../technical/Labs/Pic/bl7.png)
На седьмой работе создаются и подключаются к разработанной общей шине контроллеры периферийных устройств: клавиатура и VGA-контроллер.

## 8. Программирование на языке высокого уровня
![](../../technical/Labs/Pic/bl8.png)
В рамках восьмой работы настраивается компилятор GCC для RISC-V и для разработанной системы пишется программное обеспечение на языке программирования C.
